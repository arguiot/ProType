"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ProType=function(){function e(){_classCallCheck(this,e),this.version="v0.0.10",this.views=[],this.viewsName=[],this.controllers=[],this.currentView=""}return _createClass(e,[{key:"autoMount",value:function(){var e,t=[].concat(Array.prototype.slice.call(arguments)),i=document.querySelectorAll("[protype]");if((e=this.views).push.apply(e,_toConsumableArray(i)),i.length!=t.length)throw"Controllers and Elements don't match";for(var n=0;n<i.length;n++)this.viewsName.push(i[n].getAttribute("protype"));for(var s=0;s<t.length;s++)this.controllers.push(new t[s](i[s],this.viewsName,this.views))}},{key:"Group",get:function(){return function(){function n(e,t,i){_classCallCheck(this,n),this.group=e,this.groupName=t,this.viewName=i,this.state={},this.init()}return _createClass(n,[{key:"changeHandler",value:function(e){}}]),_createClass(n,[{key:"init",value:function(){}},{key:"setState",value:function(e,t){JSON.stringify(e)!=JSON.stringify(this.state)&&(this.state=e,t(this.state))}}]),n}()}},{key:"ViewController",get:function(){return function(){function s(e,t,i){_classCallCheck(this,s),this.view=e,this.views=i,this.viewsName=t;var n=this.views.indexOf(this.view);this.viewName=this.viewsName[n]}return _createClass(s,[{key:"mountGroup",value:function(e,t){return new t(e,e.getAttribute("protype-group"),this.viewName)}},{key:"willDisappear",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}},{key:"willShow",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}}]),s}()}}]),_createClass(e,[{key:"mount",value:function(){for(var e=[].concat(Array.prototype.slice.call(arguments)),t=0;t<e.length;t++)this.views.push(e[t][1]),this.viewsName.push(e[t][0]);for(var i=0;i<e.length;i++)this.controllers.push(new e[i][2](this.views[i],this.viewsName,this.views))}},{key:"performTransition",value:function(e,t){var i=Object.assign({animation:"none",animTime:"1s",senderGroup:!1}),n=this.currentView,s=this.viewsName.indexOf(n),r=this.views[s],o=this.controllers[s],a=this.viewsName.indexOf(e),l=this.views[a],u=this.controllers[a];this.currentView=e,l.setAttribute("style",""),l.style["z-index"]="-10",u.willShow(),i.senderGroup?(senderGroup.group.style.animation=i.animation+" "+i.animTime+" forwards",senderGroup.addEventListener("animationend",function(e){l.style.display="block",l.style["z-index"]="0",r.style.display="none",o.willDisappear()})):(l.style.display="block",r.style.animation=i.animation+" "+i.animTime+" forwards",r.addEventListener("animationend",function(e){l.style["z-index"]="0",r.style.display="none",o.willDisappear()}))}},{key:"set",value:function(i){var n=this;this.currentView=i,document.addEventListener("DOMContentLoaded",function(e){for(var t=0;t<n.views.length;t++)n.viewsName[t]==i?(n.views[t].style.display="block",n.controllers[t].willShow()):n.views[t].style.display="none"})}}]),e}();"function"==typeof define&&define.amd?define(function(){return new ProType}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=new ProType),exports.ProType=new ProType):"undefined"!=typeof global&&(global.ProType=new ProType);