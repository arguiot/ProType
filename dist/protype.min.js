"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ProType=function(){function e(){_classCallCheck(this,e),this.version="v0.0.10",this.views=[],this.viewsName=[],this.controllers=[],this.currentView=""}return _createClass(e,[{key:"Router",value:function(c){document.addEventListener("DOMContentLoaded",function(e){var t={},n=window.location.href;t.url=n;var i=window.location.origin;t.origin=i;var r=window.location.pathname;t.path=r;var o=window.location.hash;t.hash=o;for(var s=window.location.search.substring(1).split("&"),a={},l=0;l<s.length;l++){var u=s[l].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}t.search=a,t.pathValue=r.split("/"),c(t)})}},{key:"autoMount",value:function(){var e,t=[].concat(Array.prototype.slice.call(arguments)),n=document.querySelectorAll("[protype]");if((e=this.views).push.apply(e,_toConsumableArray(n)),n.length!=t.length)throw"Controllers and Elements don't match";for(var i=0;i<n.length;i++)this.viewsName.push(n[i].getAttribute("protype"));for(var r=0;r<t.length;r++)this.controllers.push(new t[r](n[r],this.viewsName,this.views))}},{key:"Group",get:function(){return function(){function i(e,t,n){_classCallCheck(this,i),this.group=e,this.groupName=t,this.viewName=n,this.state={},this.init()}return _createClass(i,[{key:"changeHandler",value:function(e){}}]),_createClass(i,[{key:"init",value:function(){}},{key:"setState",value:function(e,t){JSON.stringify(e)!=JSON.stringify(this.state)&&(this.state=e,t(this.state))}}]),i}()}},{key:"ViewController",get:function(){return function(){function r(e,t,n){_classCallCheck(this,r),this.view=e,this.views=n,this.viewsName=t;var i=this.views.indexOf(this.view);this.viewName=this.viewsName[i]}return _createClass(r,[{key:"mountGroup",value:function(e,t){return new t(e,e.getAttribute("protype-group"),this.viewName)}},{key:"willDisappear",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}},{key:"willShow",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}}]),r}()}}]),_createClass(e,[{key:"mount",value:function(){for(var e=[].concat(Array.prototype.slice.call(arguments)),t=0;t<e.length;t++)this.views.push(e[t][1]),this.viewsName.push(e[t][0]);for(var n=0;n<e.length;n++)this.controllers.push(new e[n][2](this.views[n],this.viewsName,this.views))}},{key:"performTransition",value:function(e,t){var n=Object.assign({animation:"none",animTime:"1s",senderGroup:!1}),i=this.currentView,r=this.viewsName.indexOf(i),o=this.views[r],s=this.controllers[r],a=this.viewsName.indexOf(e),l=this.views[a],u=this.controllers[a];if(this.currentView=e,l.setAttribute("style",""),l.style["z-index"]="-10",u.willShow(),!1!==n.senderGroup){var c=function(){l.style.display="block",l.style["z-index"]="0",o.style.display="none",s.willDisappear()};"none"!==n.animation?(n.senderGroup.group.style.animation=n.animation+" "+n.animTime+" forwards",n.senderGroup.addEventListener("animationend",function(e){return c()})):c()}else{var h=function(){l.style["z-index"]="0",o.style.display="none",s.willDisappear(),l.style.display="block"};l.style.display="block","none"!==n.animation?(o.style.animation=n.animation+" "+n.animTime+" forwards",o.addEventListener("animationend",function(e){return h()})):h()}}},{key:"set",value:function(n){var i=this;this.currentView=n,document.addEventListener("DOMContentLoaded",function(e){for(var t=0;t<i.views.length;t++)i.viewsName[t]==n?(i.views[t].style.display="block",i.controllers[t].willShow()):i.views[t].style.display="none"})}}]),e}();"function"==typeof define&&define.amd?define(function(){return new ProType}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=new ProType),exports.ProType=new ProType):"undefined"!=typeof global&&(global.ProType=new ProType);