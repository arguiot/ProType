"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ProType=function(){function e(){_classCallCheck(this,e),this.version="v0.0.10",this.views=[],this.viewsName=[],this.controllers=[],this.currentView=""}return _createClass(e,[{key:"autoMount",value:function(){var e,t=[].concat(Array.prototype.slice.call(arguments)),n=document.querySelectorAll("[protype]");if((e=this.views).push.apply(e,_toConsumableArray(n)),n.length!=t.length)throw"Controllers and Elements don't match";for(var i=0;i<n.length;i++)this.viewsName.push(n[i].getAttribute("protype"));for(var s=0;s<t.length;s++)this.controllers.push(new t[s](n[s],this.viewsName,this.views))}},{key:"Group",get:function(){return function(){function i(e,t,n){_classCallCheck(this,i),this.group=e,this.groupName=t,this.viewName=n,this.state={},this.init()}return _createClass(i,[{key:"changeHandler",value:function(e){}}]),_createClass(i,[{key:"init",value:function(){}},{key:"setState",value:function(e,t){JSON.stringify(e)!=JSON.stringify(this.state)&&(this.state=e,t(this.state))}}]),i}()}},{key:"ViewController",get:function(){return function(){function s(e,t,n){_classCallCheck(this,s),this.view=e,this.views=n,this.viewsName=t;var i=this.views.indexOf(this.view);this.viewName=this.viewsName[i]}return _createClass(s,[{key:"mountGroup",value:function(e,t){return new t(e,e.getAttribute("protype-group"),this.viewName)}},{key:"willDisappear",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}},{key:"willShow",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}}]),s}()}}]),_createClass(e,[{key:"mount",value:function(){for(var e=[].concat(Array.prototype.slice.call(arguments)),t=0;t<e.length;t++)this.views.push(e[t][1]),this.viewsName.push(e[t][0]);for(var n=0;n<e.length;n++)this.controllers.push(new e[n][2](this.views[n],this.viewsName,this.views))}},{key:"performTransition",value:function(e,t){var n=Object.assign({animation:"none",animTime:"1s",senderGroup:!1}),i=this.currentView,s=this.viewsName.indexOf(i),r=this.views[s],o=this.controllers[s],a=this.viewsName.indexOf(e),l=this.views[a],u=this.controllers[a];this.currentView=e,l.setAttribute("style",""),l.style["z-index"]="-10",l.style.display="block",u.willShow(),n.senderGroup?(senderGroup.group.style.animation=n.animation+" "+n.animTime+" forwards",senderGroup.addEventListener("animationend",function(e){l.style["z-index"]="0",r.style.display="none",o.willDisappear()})):(r.style.animation=n.animation+" "+n.animTime+" forwards",r.addEventListener("animationend",function(e){l.style["z-index"]="0",r.style.display="none",o.willDisappear()}))}},{key:"set",value:function(n){var i=this;this.currentView=n,document.addEventListener("DOMContentLoaded",function(e){for(var t=0;t<i.views.length;t++)i.viewsName[t]==n?(i.views[t].style.display="block",i.controllers[t].willShow()):i.views[t].style.display="none"})}}]),e}();"function"==typeof define&&define.amd?define(function(){return new ProType}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=new ProType),exports.ProType=new ProType):"undefined"!=typeof global&&(global.ProType=new ProType);